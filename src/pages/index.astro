---
import '../styles/globals.css'
import Layout from '../layouts/Layout.astro';

import { getAllPosts } from "../lib/post";
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';

const posts = await getAllPosts();

const siteName = "Today I Learned";
const siteUrl = "https://kmkkiii.com";

const canonicalURL = new URL(Astro.url.pathname, siteUrl);
const ogpImageURL = new URL("/kmkkiii.png", canonicalURL);
---

<Layout title="Welcome to Astro.">
	<!-- twitter -->
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:image" content={ogpImageURL} />
	<meta name="twitter:title" content={siteName} />
	<meta name="twitter:url" content={siteUrl} />

	<meta property="og:url" content={siteUrl} />
	<meta property="og:title" content={siteName} />
	<meta property="og:image" content={ogpImageURL} />

	<ul class="list-disc list-inside">
		{
			posts.map((post) => {
				return (
				<Card className='hover:opacity-75'>
					<a href={post.slug}>
						<CardHeader>
							<CardTitle className='text-md'>{post.title}</CardTitle>
							<CardDescription>
								<div class="flex items-center">
									<div class="text-xs mr-2">公開日: {post.date}</div>
									{
										post.tags.map((tag) => (
											<div class="bg-slate-300 dark:bg-slate-500 rounded-sm text-xs mx-1 py-1 px-2">
												{tag}
											</div>
										))
									}
								</div>
							</CardDescription>
						</CardHeader>
					</a>
				</Card>
				)
			})
		}
	</ul>
</Layout>
